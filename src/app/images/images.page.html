<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>images</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div class="d-flex justify-content-center my-2">
    <ion-button (click)="setOpen(true)" class="w-75">Click/Upload Images</ion-button>
  </div>
  <br>
  <div class="d-flex justify-content-center my-2">
    <ion-button (click)="setPreviewOpen(true)" class="w-75">Preview Images</ion-button>
  </div>
  <br>
  <div class="d-flex justify-content-center my-2">
    <ion-button (click)="submitAllImages()" class="w-75">Submit Images</ion-button>
  </div>

  <div *ngIf="uploadSucces" class="px-2">
    <span class="font-bold">Upload Size: </span><span>{{len}}</span><br/>
    <span class="font-bold">Upload Status: </span><span>{{uploadData.success ? 'Successful' : 'Fail'}}</span><br/>
    <span class="font-bold">Upload Response Code: </span><span>{{uploadData.responseCode}}</span><br/>
    <span class="font-bold">Upload Message: </span><span>{{uploadData.message}}</span><br/>
  </div>

  <!-- <form [formGroup]="imageForm" (ngSubmit)="submitAllImages($event)">
    <ion-list>
      <ion-item>
        <ion-label position="stacked">Select Images (multiple)</ion-label>
        <input type="file" name="images" accept="image/*" multiple (change)="onFileChange($event)">
      </ion-item>
    </ion-list>

    <ion-button expand="full" type="submit" [disabled]="!selectedImages.length">Upload</ion-button>
  </form> -->


  <ion-modal #modal [isOpen]="isImageModalOpen" [initialBreakpoint]="0.27" [breakpoints]="[0.27, 0.5]" [backdropDismiss]="false">
    <ng-template>
      <ion-content>
        <ion-list class="mt-2 p-2">
          <ion-item (click)="getImages()">
            <ion-avatar slot="start" class="d-flex justify-content-center align-items-center">
              <ion-icon name="camera" style="font-size: 26px;"></ion-icon>
            </ion-avatar>
            <ion-label>
              <h2>Click Images</h2>
            </ion-label>
          </ion-item>
          <ion-item (click)="pickImages()">
            <ion-avatar slot="start" class="d-flex justify-content-center align-items-center">
              <ion-icon name="images" style="font-size: 26px;"></ion-icon>
            </ion-avatar>
            <ion-label>
              <h2>Upload From Photos</h2>
              <p>Multi-uploads supported</p>
            </ion-label>
          </ion-item>
          <ion-item (click)="setOpen(false)">
            <ion-button class="full-button">
              <p>Close</p>
            </ion-button>
          </ion-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>


  <ion-modal #preview [isOpen]="isPreviewModalOpen" [initialBreakpoint]="0.25" [breakpoints]="[0.25, 0.5, 0.75, 0.90, 1]" [backdropDismiss]="false">
    <ng-template>
      <ion-content>
        <ion-list class="mt-2 p-2">
          <ion-item *ngFor="let img of selectedImages">
            <ion-img src="{{img}}"></ion-img>
          </ion-item>
          <ion-item (click)="setPreviewOpen(false)">
            <ion-button class="full-button">
              <p>Close</p>
            </ion-button>
          </ion-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>

